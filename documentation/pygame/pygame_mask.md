[![StackOverflow](https://stackexchange.com/users/flair/7322082.png)](https://stackoverflow.com/users/5577765/rabbid76?tab=profile) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [![reply.it](../../resource/logo/Repl_it_logo_80.png) reply.it](https://repl.it/repls/folder/PyGame%20Examples)

"The only way to go fast, is to go well."  
Robert C. Martin, Clean Architecture

---

# Mask

## Create mask from Surface

Related Stack Overflow questions:

- [pygame: create mask form png with transparancy](https://stackoverflow.com/questions/68517375/pygame-create-mask-form-png-with-transparancy/68517405#68517405)  

- [How can I make my code more optimised by not drawing a rect on each pixel?](https://stackoverflow.com/questions/68835224/how-can-i-make-my-code-more-optimised-by-not-drawing-a-rect-on-each-pixel/68835795#68835795)  

## Mask collision

Related Stack Overflow questions:

- **[PyGame collision with masks](https://stackoverflow.com/questions/57455811/pygame-collision-with-masks/57499484#57499484)**  
- [Collision between masks in PyGame](https://stackoverflow.com/questions/55817422/collision-between-masks-in-pygame/55818093#55818093)  
  ![Check collision between a image and a line](https://i.stack.imgur.com/gEqXr.gif)

  :scroll: **[Minimal example - Find intersection of surfaces](../../examples/minimal_examples/pygame_minimal_mask_intersect_surface.py)**

  **[![](https://i.stack.imgur.com/5jD0C.png) repl.it/@Rabbid76/PyGame-SurfaceMaskIntersect](https://replit.com/@Rabbid76/PyGame-SurfaceMaskIntersect#main.py)**

- [Pygame mask collision](https://stackoverflow.com/questions/60077813/pygame-mask-collision/60078039#60078039)  
  [![Pygame mask collision](https://i.stack.imgur.com/fiLMi.gif)](https://stackoverflow.com/questions/60077813/pygame-mask-collision/60078039#60078039)  

- [Make a line as a sprite with its own collision in Pygame](https://stackoverflow.com/questions/34456195/make-a-line-as-a-sprite-with-its-own-collision-in-pygame/65324946#65324946)  
- [Check collision between a image and a line](https://stackoverflow.com/questions/58662215/check-collision-between-a-image-and-a-line-pygame/58662648#58662648)  
  ![Check collision between a image and a line](https://i.stack.imgur.com/tMq2i.gif)

  :scroll: **[Minimal example - Find intersection of surfaces and line](../../examples/minimal_examples/pygame_minimal_mask_intersect_surface_line_1.py)**

  **[![](https://i.stack.imgur.com/5jD0C.png) repl.it/@Rabbid76/PyGame-PyGame-SurfaceLineMaskIntersect-1](https://replit.com/@Rabbid76/PyGame-SurfaceLineMaskIntersect-1#main.py)**

- [How to do a collision detection between line and rectangle in pygame?](https://stackoverflow.com/questions/70497288/how-to-do-a-collision-detection-between-line-and-rectangle-in-pygame/70498845#70498845)  
  ![How to do a collision detection between line and rectangle in pygame?](https://i.stack.imgur.com/rmHWd.gif)

- **[Overlap between mask and fired beams in PyGame [AI car model vision]](https://stackoverflow.com/questions/62008457/overlap-between-mask-and-fired-beams-in-pygame-ai-car-model-vision/62082726#62082726)**  
  ![Overlap between mask and fired beams in PyGame](https://i.stack.imgur.com/YyFbN.gif)  

  :scroll: **[Minimal example - Find intersection of surface and lines](../../examples/minimal_examples/pygame_minimal_mask_intersect_surface_line_2.py)**

  **[![](https://i.stack.imgur.com/5jD0C.png) repl.it/@Rabbid76/PyGame-PyGame-SurfaceLineMaskIntersect-2](https://replit.com/@Rabbid76/PyGame-SurfaceLineMaskIntersect-2#main.py)**

- [How can I rotate my hitbox with my rotating and moving car in pygame?](https://stackoverflow.com/questions/62974678/how-can-i-rotate-my-hitbox-with-my-rotating-and-moving-car-in-pygame/62976825#62976825)

- [python pygame mask collision](https://stackoverflow.com/questions/59595874/python-pygame-mask-collision/59598297#59598297)  
  ![python pygame mask collision](https://i.stack.imgur.com/vSuGD.gif)

- [Get the pixels which are colliding with the Surface](https://stackoverflow.com/questions/20715211/get-the-pixels-which-are-colliding-with-the-surface/65408358#65408358)

- [How would I make color collision using pygame.mask?](https://stackoverflow.com/questions/65981815/how-would-i-make-color-collision-using-pygame-mask/65982315#65982315)  
  ![How would I make color collision using pygame.mask?](https://i.stack.imgur.com/YT515.png)

  :scroll: **[Minimal example - Mask form a single color](../../examples/minimal_examples/pygame_minimal_mask_from_color.py)**

- [Pygame mask collision only putting damage on base on first collision](https://stackoverflow.com/questions/67429383/pygame-mask-collision-only-putting-damage-on-base-on-first-collision/67429569#67429569)  
  ![Pygame mask collision only putting damage on base on first collision](https://i.stack.imgur.com/eIynX.gif)

- [Pygame mask collision. Using a transparent image as background not working](https://stackoverflow.com/questions/67560266/pygame-mask-collision-using-a-transparent-image-as-background-not-working/67560457#67560457)

- [Pygame masks Python](https://stackoverflow.com/questions/67846651/pygame-masks-python/67846703#67846703)  

- [wondering about pixel perfect mousepointer collision in the case of a button](https://stackoverflow.com/questions/70338690/pygame-wondering-about-pixel-perfect-mousepointer-collision-in-the-case-of-a-b/70338984#70338984)  
  ![wondering about pixel perfect mousepointer collision in the case of a button](https://i.stack.imgur.com/ZymGp.gif)

  scroll: **[Minimal example - Mask collide point](../../examples/minimal_examples/pygame_minimal_mask_intersect_point.py)**

- [How do I check if a mask fully contains another mask in Pygame?](https://stackoverflow.com/questions/71155740/how-do-i-check-if-a-mask-fully-contains-another-mask-in-pygame/71162805#71162805)  

- [How would I clamp the player sprite to a certain polygon boundary](https://stackoverflow.com/questions/73991746/how-would-i-clamp-the-player-sprite-to-a-certain-polygon-boundary/74085878#74085878)  
  ![How would I clamp the player sprite to a certain polygon boundary](https://i.stack.imgur.com/luM77.gif)  

  scroll: **[Minimal example - Keepn in mask with overlapping area](../../examples/minimal_examples/pygame_minimal_collide_in_mask_1.py)**

## Mask count pixel

Related Stack Overflow questions:

- [Get the average Color of a Surface ignoring transparent pixels](https://stackoverflow.com/questions/69876220/get-the-average-color-of-a-surface-ignoring-transparent-pixels/70056421#70056421)  
  ![Get the average Color of a Surface ignoring transparent pixels](https://i.stack.imgur.com/mWM9e.png)

  :scroll: **[Minimal example - Load image](../../examples/minimal_examples/pygame_minimal_mask_count_pixel_1.py)**

## Selection and highlighting

Related Stack Overflow questions:

- [How to add a white surface with the shape of my original image in pygame?](https://stackoverflow.com/questions/67884084/how-to-add-a-white-surface-with-the-shape-of-my-original-image-in-pygame/67889758#67889758)  
  ![How to add a white surface with the shape of my original image in pygame?](https://i.stack.imgur.com/jnZNK.gif)

  :scroll: **[Minimal example - Highlight object](../../examples/minimal_examples/pygame_minimal_mask_hightlighting.py)**

  **[![](https://i.stack.imgur.com/5jD0C.png) repl.it/@Rabbid76/PyGame-PyGame-HighlightObject](https://replit.com/@Rabbid76/PyGame-HighlightObject#main.py)**

## Circular mask

Related Stack Overflow questions:

- [pygame: mask non-image type surfaces](https://stackoverflow.com/questions/65455888/pygame-mask-non-image-type-surfaces/65455939#65455939)

## Mask overlapping area

Related Stack Overflow questions:

- [How can I visualize the overlapping area of 2 masks in pygame?](https://stackoverflow.com/questions/70485132/how-can-i-visualize-the-overlapping-area-of-2-masks-in-pygame/70485262#70485262)  
  ![How can I visualize the overlapping area of 2 masks in pygame?](https://i.stack.imgur.com/N6DZ4.gif)  

  :scroll: **[Minimal example - Visualize overlapping area](../../examples/minimal_examples/pygame_minimal_mask_visualize_overlapping_area.py)**

## Mask bounding area rectangle

Related Stack Overflow questions:

- [How to get the correct dimensions for a pygame rectangle created from an image](https://stackoverflow.com/questions/65361582/how-to-get-the-correct-dimensions-for-a-pygame-rectangle-created-from-an-image/65361896#65361896)  
  [Questions regarding the pygame.mask function](https://stackoverflow.com/questions/67523501/questions-regarding-the-pygame-mask-function/67523631#67523631)  
  ![How to get the correct dimensions for a pygame rectangle created from an image](https://i.stack.imgur.com/iZH3y.png)

  :scroll: **[Minimal example - Find bounding area rectangle](../../examples/minimal_examples/pygame_minimal_mask_bounding_area_rectangle.py)**

  **[![](https://i.stack.imgur.com/5jD0C.png) repl.it/@Rabbid76/ImageHitbox](https://replit.com/@Rabbid76/PyGame-ImageHitbox#main.py)**

[`pygame.Surface.get_rect.get_rect()`](https://www.pygame.org/docs/ref/surface.html#pygame.Surface.get_rect) returns a rectangle with the size of the _Surface_ object. This function does not consider the drawing area in the image. If you want to find the bounding rectangle of the painted area in the surface, you need to create a mask.  

[`pygame.mask.from_surface`](https://www.pygame.org/docs/ref/mask.html) creates a [`pygame.mask.Mask`](https://www.pygame.org/docs/ref/mask.html#pygame.mask.Mask) object form a [`pygame.Surface`](https://www.pygame.org/docs/ref/surface.html).  
A _Surface_ is bitmap. A _Mask_ is an 2 dimensional array with [Boolean](https://en.wikipedia.org/wiki/Boolean_data_type) values. The _Mask_ created is the size of the _Surface. A field is `True` if the corresponding pixel in the surface is not transparent, and `False` if it is transparent:

```py
surf_mask = pygame.mask.from_surface(surf)
```

Get a list containing a bounding rectangles (sequence of [`pygame.Rect`](https://www.pygame.org/docs/ref/rect.html) objects) for each connected component with [`get_bounding_rects`](https://www.pygame.org/docs/ref/mask.html#pygame.mask.Mask.get_bounding_rects).  
[`pygame.mask.Mask.get_bounding_rects`](https://www.pygame.org/docs/ref/mask.html#pygame.mask.Mask.get_bounding_rects) creates a list of [`pygame.Rect`](https://www.pygame.org/docs/ref/rect.html) objects. Each rectangle describes a bounding area of connected pixles. If the _Surface_ contains exactly 1 connected image, you will get exactly 1 rectangle surrounding the image:

```py
rect_list = surf_mask.get_bounding_rects()
```

Create the union rectangle of the sequence of rectangles with [`unionall`](https://www.pygame.org/docs/ref/rect.html#pygame.Rect.unionall):

```py
surf_mask_rect = rect_list[0].unionall(rect_list)
```

```py
def getMaskRect(surf, top = 0, left = 0):
    surf_mask = pygame.mask.from_surface(surf)
    rect_list = surf_mask.get_bounding_rects()
    surf_mask_rect = rect_list[0].unionall(rect_list)
    surf_mask_rect.move_ip(top, left)
    return surf_mask_rect
```

## Sprite mask

See [Sprite, Group and Sprite mask - Sprite mask](pygame_sprite_and_sprite_mask.md)
